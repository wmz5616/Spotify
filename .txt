cd personal-music-api
npx prisma migrate dev
npm run start:dev

Invoke-RestMethod -Uri "http://localhost:3001/api/library/scan?force=true" -Method Post

cd personal-music-ui
npm run dev

我需要你给出详细的步骤包括完整代码并且一个一个文件按顺序的进行优化，等待我确认后才能进行下一个文件

1. 性能优化
（1）列表虚拟滚动
现状：目前 PopularSongsList 和歌词列表是直接渲染所有 DOM 节点的。如果用户有几千首歌曲，页面会变得极其卡顿。
建议：引入 react-window 或 tanstack-virtual。
效果：无论列表有一百项还是一万项，DOM 中只渲染可视区域的几十项，保持极高的帧率。
（2）后端图片缩略图处理
现状：目前后端直接读取并返回音频文件中的原始封面图。如果封面图是 4K 分辨率或几 MB 大小，在相册网格页加载时会非常消耗带宽和内存。
建议：在 NestJS 后端集成 sharp 库。在扫描音乐时，预先生成 thumbnail (200x200) 和 medium (600x600) 两种尺寸的缓存图片。前端根据场景请求不同尺寸。

2. 用户体验
沉浸式全屏播放模式
建议：增加一个按钮，点击后将底部的迷你播放条扩展为覆盖全屏的视图。
内容：左侧放置超大专辑封面，右侧放置滚动歌词，背景使用动态流光。

3. 全局模糊搜索
现状：目前的搜索可能是基于数据库的 contains（包含）匹配。
建议：引入模糊搜索逻辑（如 fuse.js 或后端的 Full-Text Search）。允许用户输错一两个字母（例如输入 "Tylor Swift" 也能搜到 "Taylor Swift"）。

4. 无缝转场动画
建议：利用 Next.js 的 View Transitions API。当你点击专辑卡片时，封面图不应该“消失再出现”，而是应该从卡片位置“飞”大到详情页的头部位置（Shared Element Transition）。

5. 全局键盘快捷键
痛点：用户必须切换回浏览器标签页并用鼠标点击才能暂停或切歌，操作繁琐。
建议：添加全局键盘事件监听 (window.addEventListener('keydown'))。
功能：
Space (空格): 播放/暂停
← / → (方向键): 快退 / 快进 5秒
Ctrl + ← / →: 上一首 / 下一首
↑ / ↓: 音量调节
M: 静音